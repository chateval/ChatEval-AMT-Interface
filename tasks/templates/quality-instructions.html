<crowd-form answer-format="flatten-objects">
<h2>Please Note</h2>

<ul>
  <li>You have to be an <span style="color: rgb(255, 0, 0);"><b>English Native Speaker</b></span>.</li>
  <li>You have to complete the ratings for all responses.<span style="color: rgb(255, 0, 0);"><b> All fields are required.</b></span></li>
</ul>

<h2>Informed Consent</h2>

<p>This is a linguistic experiment performed at the New York University. If you have any question about this study, feel free to contact Dr. Joao Sedoc. Participation in this research is voluntary. You have the right to withdraw from the experiment at any time. The collected data will be used for research purposes only. Personal data will be kept confidential and will not be shared with third parties.</p>

<h2>Instructions</h2>

<p>In this task you will read five 3-turn conversations. For each conversation you will see possible responses to the last turn generated by a computer program. The programs attempts to generate responses that are relevant, while also making an interesting contribution to the conversation.</p>

<p>For each prompt, you will read 8 possible responses, and judge each response on its appropriateness on a 1 to 5 scale from not at all appropriate to extremely approriate. Appopriateness is defined as follows:</p>

<font size="+2">
<ol>
  <li><font color="red">Fluency: </font>Flows naturally and sounds like what an experienced speaker/writer of the language might say.
  </li>
  <li><font color="red">Coherence: </font>Facts and topics are consistent, i.e. non-contradictory with previous parts of the conversation.
  </li>
  <li><font color="red">Interestingness: </font>Contains relevant and rich, non-repetitious information that builds upon the conversation.
  </li>
</ol>
</font>

<p><i>Example:</i> Below we show a prompt and several possible responses, along with suggested scores for each response.</p>

<p><b>Prompt: What do you do for work?</b></p>

<table class="instructions">
  <thead>
  <tr>
    <th><b>Responses</b></th>
    <th><b>Suggested scores</b></th>
  </tr>
  </thead>
  <tr>
    <th>I doctor.</th>
    <th>1, 5, 5. This does not sound like a native speaker's response, but there are no contradictions and it answers the question.</th>
  </tr>
  <tr>
    <th>I like pancakes.</th>
    <th>5, 3, 1. This is grammatical but does not answer the question or contribute to the conversation.</th>
  </tr>
  <tr>
    <th>I work as a teacher.</th>
    <th>5, 5, 5. An excellent on-topic response that does not contradict any previous statements.</th>
  </tr>

</table>
</br>
<b>Note:</b> ignore things like "i ' m" this should be read as "I'm" and not docked points for grammar.

<style type="text/css">
table {
  font-size: 80%;
  margin-top: 5px;
  text-align: center;
}

.instructions {
  font-size: 100%;
  margin-top: 5px;
}

.instructions th {
  text-align: left;
  font-weight: normal;
}
</style>
<ol>
    {% for prompt in prompts %}
    {% set promptloop = loop %}
    <li><strong>&nbsp;Prompt: </strong>
    {% for turn in prompt.prompt %}
        <p style="font-size:30px;font-family:verdana;color:blue">{{ turn }}</p>
    {% endfor %}
    
    
  
    {% for model in prompt.models %}
      {% set modelloop = loop %}

        <hr align="left" width="75%" /> <strong>System {{ modelloop.index }}: {{ model.response }}</strong>

      <table style="width: 700px;" border="0" cellpadding="0" cellspacing="0" rules="NONE">
        <tbody>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td style="width: 100px;"  align="center">Least (1) </td>
            <td style="width: 100px;">&nbsp;</td>
            <td style="width: 100px;">&nbsp;</td>
            <td style="width: 100px;">&nbsp;</td>
            <td style="width: 100px;" align="center">Most (5) </td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td style="text-align: left;" rowspan="1"><b><font color="#ff0000">Fluency</font></b></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Fluency" type="radio" value="1" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Fluency" type="radio" value="2" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Fluency" type="radio" value="3" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Fluency" type="radio" value="4" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Fluency" type="radio" value="5" required/></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td style="text-align: left;" rowspan="1"><b><font color="#ff0000">Coherence</font></b></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Coherence" type="radio" value="1" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Coherence" type="radio" value="2" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Coherence" type="radio" value="3" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Coherence" type="radio" value="4" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Coherence" type="radio" value="5" required/></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td style="text-align: left;" rowspan="1"><b><font color="#ff0000">Interestingness</font></b></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Interestingness" type="radio" value="1" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Interestingness" type="radio" value="2" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Interestingness" type="radio" value="3" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Interestingness" type="radio" value="4" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}.Interestingness" type="radio" value="5" required/></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            
          </tr>
        </tbody>
      </table>

      {% endfor %}
  </li> 
<hr></br></br></br></br></br>

    {% endfor %}
</ol>

      <p>Please provide any comments you may have below, we appreciate your input!</p>

      <p><textarea cols="80" name="comment" rows="3">None?</textarea></p>

      <p id="error_message">&nbsp;</p>
      <!-- add some validation code --><script type='text/javascript'>
      window.onload = function() { document.getElementById('submitButton').setAttribute('onclick', 'return validateForm()'); }

      function getCheckValue(checkName)
      {
        var genders = document.getElementsByName(checkName);

        for(var i = 0; i < genders.length; i++) {
           if(genders[i].checked == true) {
               return genders[i].value;
           }
        }
        return ""
      }

      function checkScores() {
        // grammar - mean - simp
        var cnames = ["appropriate"];
        var actual_names = ["Appropriateness"]
        var N_sys = 4;
        var N_sent = 5;
        for(var i = 1; i <= N_sent; i ++)
        {
          for(var j = 1; j <= N_sys; j ++)
          {
            for(var k = 0; k < cnames.length; k ++)
            {
              checkName = cnames[k] + i + "" + j;
              // alert(checkName);
              checkValue = getCheckValue(checkName);
              if(checkValue == "")
              {
                alert("Evaluation for Group " + i + ", System " + j + " is not finished! (" + actual_names[k] + " emtpy!)");
                document.getElementById("error_message").innerHTML = "\<font color=\"red\"\>Evaluation for Group " 
                  + i + ", System " + j + " is not finished! (" + actual_names[k] + " empty!)\<\/font\>";
                return false;
              }
            }
          }
        }
        return true;
      }

      function validateForm() {
        return checkScores();
      }

      </script>
      </crowd-form>
